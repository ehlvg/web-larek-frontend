# Проектная работа "Веб-ларек"

Интернет-магазин с товарами для веб-разработчиков, реализованный с использованием MVP-архитектуры.

## Используемый стек

- **HTML** — разметка страниц
- **SCSS** — стилизация и верстка
- **TypeScript** — логика приложения
- **Webpack** — сборка проекта

## Инструкция по сборке и запуску

Для установки зависимостей:

```bash
npm install
# или
yarn
```

Для запуска в режиме разработки:

```bash
npm run start
# или
yarn start
```

Для сборки продакшн-версии:

```bash
npm run build
# или
yarn build
```

## Архитектура проекта

Проект построен по **MVP (Model-View-Presenter)** паттерну с использованием событийной архитектуры.

### Основные части архитектуры:

1. **Модель (Model)** — отвечает за работу с данными, их обработку и валидацию
2. **Представление (View)** — отвечает за отображение данных и взаимодействие с пользователем
3. **Презентер (Presenter)** — связывает модель и представления через события
4. **Брокер событий (Event Broker)** — обеспечивает слабое связывание компонентов

### Взаимодействие компонентов:

- **View** сообщает о действиях пользователя через события
- **Presenter** обрабатывает события и обновляет Модель
- **Model** сообщает об изменениях через события
- **View** обновляется в ответ на события от Модели

## Описание базовых классов

### EventEmitter
Класс `EventEmitter` обеспечивает работу с событиями. Его функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события.

### Component
Класс `Component` является базовым для всех компонентов приложения. Он предоставляет общие методы для работы с DOM-элементами и отрисовки.

### Api
Класс `Api` обеспечивает работу с внешним API. Его функции: выполнение HTTP-запросов, обработка ошибок, преобразование данных.

### Model
Класс `Model` является базовым для моделей данных. Он обеспечивает взаимодействие с событиями и управление состоянием.

## Описание компонентов

### Page
Компонент `Page` отвечает за отображение главной страницы. Он управляет отображением каталога товаров, счетчиком корзины и блокировкой страницы при открытии модальных окон.

### Card
Компонент `Card` отображает карточку товара. Он может использоваться как в каталоге, так и в превью товара. Обрабатывает клики по карточке и кнопкам.

### Basket
Компонент `Basket` отображает содержимое корзины покупок. Он показывает список товаров, общую стоимость и обрабатывает действия по оплате.

### Modal
Компонент `Modal` обеспечивает отображение модальных окон. Он может отображать любой контент и обрабатывает закрытие окна.

### Form
Компонент `Form` является базовым для всех форм приложения. Он обеспечивает валидацию полей, отображение ошибок и обработку отправки.

### Order
Компонент `Order` отображает форму оформления заказа. Он наследуется от `Form` и добавляет специфическую логику для выбора способа оплаты и ввода адреса.

### Contacts
Компонент `Contacts` отображает форму ввода контактных данных. Он наследуется от `Form` и предоставляет поля для ввода email и телефона.

### Success
Компонент `Success` отображает сообщение об успешном оформлении заказа. Он показывает итоговую стоимость заказа и обрабатывает закрытие окна.

## Данные приложения

### Product
Тип данных интерфейс `Product` описывает структуру товара:
- `id` — уникальный идентификатор
- `title` — название товара
- `category` — категория товара
- `image` — URL изображения товара
- `price` — цена товара (может быть null для бесценных товаров)
- `description` — описание товара

### OrderData
Интерфейс `OrderData` описывает данные заказа:
- `payment` — способ оплаты
- `address` — адрес доставки
- `email` — электронная почта
- `phone` — телефон
- `total` — общая стоимость
- `items` — массив ID товаров

### IBasket
Интерфейс `IBasket` описывает состояние корзины:
- `items` — массив товаров в корзине
- `total` — общая стоимость
- `count` — количество товаров

## Процессы приложения

Все процессы в приложении реализованы через события. Основные события:

- `ITEMS_CHANGED` — изменение каталога товаров
- `CARD_SELECT` — выбор товара для просмотра
- `BASKET_CHANGED` — изменение содержимого корзины
- `ORDER_SUBMIT` — оформление заказа
- `MODAL_OPEN`/`MODAL_CLOSE` — открытие/закрытие модальных окон

### Поток оформления заказа:

1. Пользователь добавляет товары в корзину
2. Открывает корзину и нажимает "Оформить"
3. Заполняет форму доставки (способ оплаты, адрес)
4. Заполняет контактные данные (email, телефон)
5. Нажимает "Оплатить"
6. Получает подтверждение заказа

## Структура проекта

- `src/` — исходные файлы проекта
- `src/components/` — компоненты приложения
- `src/components/base/` — базовые классы
- `src/types/` — типы данных TypeScript
- `src/utils/` — вспомогательные функции и константы
- `src/scss/` — стили приложения
- `src/pages/index.html` — HTML-шаблон страницы
- `src/index.ts` — точка входа приложения

### Важные файлы:

- `src/types/index.ts` — определения всех типов данных
- `src/components/base/events.ts` — базовый класс для работы с событиями
- `src/components/base/api.ts` — базовый класс для работы с API
- `src/utils/constants.ts` — константы приложения
- `src/utils/utils.ts` — вспомогательные функции
- `src/scss/styles.scss` — корневой файл стилей